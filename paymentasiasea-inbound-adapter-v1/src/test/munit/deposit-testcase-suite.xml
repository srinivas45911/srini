<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:json="http://www.mulesoft.org/schema/mule/json"
	xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:mock="http://www.mulesoft.org/schema/mule/mock" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:spring="http://www.springframework.org/schema/beans" xmlns:core="http://www.mulesoft.org/schema/mule/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd
http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/mock http://www.mulesoft.org/schema/mule/mock/current/mule-mock.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd">
   <munit:config name="munit" mock-connectors="false" mock-inbounds="false" doc:name="MUnit configuration"/>
    <spring:beans>
        <spring:import resource="classpath:implementation.xml"/>
         <spring:import resource="classpath:api.xml"/>
          <spring:import resource="classpath:config.xml"/>
    </spring:beans>    
   <munit:test name="DepositFlow-TestCase1(SuccessScenario)" description="Verifying Deposits flow with test request for success scenario" >
        <munit:set payload="#['{&quot;CustomerId&quot;:&quot;123456&quot;,&quot;OrderId&quot;:119876541255081,&quot;Amount&quot;:100,&quot;ProductId&quot;:287,&quot;LegalEntity&quot;:&quot;AxiCorp Limited&quot;,&quot;Currency&quot;:&quot;IDR&quot;,&quot;ClientIp&quot;:&quot;123.123.123.123&quot;,&quot;ClientSessionId&quot;:&quot;QWE!@#wasdferty&quot;,&quot;SystemSourceId&quot;:6,&quot;InstrumentToken&quot;:&quot;&quot;,&quot;AdditionalInfo&quot;:{&quot;ClientFirstName&quot;:&quot;Someone&quot;,&quot;ClientLastName&quot;:&quot;Buying&quot;,&quot;ClientPhone&quot;:&quot;9876543223&quot;,&quot;ClientAddress&quot;:&quot;1,Bay Street&quot;,&quot;ClientEmail&quot;:&quot;someone@gmail.com&quot;,&quot;ClientCountry&quot;:&quot;US&quot;,&quot;ClientState&quot;:&quot;NY&quot;}}']" doc:name="set request payload"/>
        <json:json-to-object-transformer returnClass="java.util.HashMap" doc:name="JSON to Object"/>
        <logger message="#['Request Payload\n CustomerId : '+payload.CustomerId+'\n OrderId : '+payload.OrderId+'\n Amount : '+payload.Amount+'\n Currency : '+payload.Currency+'\n ClientIp :'+payload.ClientIp+'\n ClientFirstName:'+payload.AdditionalInfo.ClientFirstName+'\n ClientLastName:'+payload.AdditionalInfo.ClientLastName+'\n ClientPhone:'+payload.AdditionalInfo.ClientPhone+'\n ClientEmail:'+payload.AdditionalInfo.ClientEmail+'\n']" level="INFO" category="MUnit Test || DepositFlow-TestCase1(SuccessScenario)" doc:name="Request Payload"/>
        <json:object-to-json-transformer doc:name="Object to JSON"/>
        <flow-ref name="implementation-for-paymentasiasea-deposit_Flow" doc:name="Flow ref to Deposits Flow"/>
        <json:json-to-object-transformer returnClass="java.util.HashMap" doc:name="JSON to Object"/>
        <logger message="#['Response Payload \n OrderId : '+payload.OrderId+'\n ClientRedirectURL : '+payload.ClientRedirectURL+'\n ClientRedirectType : '+payload.ClientRedirectType+'\n PostParameters : '+payload.PostParameters+'\n']" level="INFO" category="MUnit Test || DepositFlow-TestCase1(SuccessScenario)" doc:name="Response Payload "/>
        <json:object-to-json-transformer doc:name="Object to JSON"/>
        <munit:assert-on-equals expectedValue="#['{&quot;ClientRedirectType&quot;:&quot;POST&quot;,&quot;AdditionalInfo&quot;:{},&quot;PaymentCode&quot;:&quot;&quot;,&quot;PostPayload&quot;:&quot;&quot;,&quot;RecommendedDisplayWidth&quot;:0,&quot;OrderId&quot;:119876541255081,&quot;ClientRedirectURL&quot;:&quot;https://payment.pa-sys.com/app/page/3f032457-c233-42d4-b7b4-3b1612d59b02&quot;,&quot;PaymentMessage&quot;:&quot;&quot;,&quot;RecommendedDisplayType&quot;:&quot;Redirect&quot;,&quot;ProviderReference&quot;:&quot;&quot;,&quot;PostParameters&quot;:&quot;amount=100&amp;currency=IDR&amp;customer_address=1,Bay Street&amp;customer_country=US&amp;customer_email=someone@gmail.com&amp;customer_first_name=Someone&amp;customer_ip=123.123.123.123&amp;customer_last_name=Buying&amp;customer_phone=9876543223&amp;customer_state=NY&amp;merchant_reference=119876541255081&amp;network=CreditCard&amp;return_url=https://demo.shop.com/payment/return&amp;sign=9c68911d9439b4e2a44d8bd62f9cee6b2ba7b9eaae52aa12d141c8c96e09c6199a7a56a4c5203e1f7c1697a7065cfadc52251c51c0a20aade2464374235ee64f&quot;,&quot;PaymentStatus&quot;:&quot;REDIRECT&quot;,&quot;RecommendedDisplayHeight&quot;:0}']" actualValue="#[payload]" doc:name="Assert Equals"/>
    </munit:test>
    <munit:test name="DepositFlow-TestCase2(SuccessScenarioforProductSelectedinRequest)" description="Verifying Deposits flow with test request for success scenario" >
        <munit:set payload="#['{&quot;CustomerId&quot;:&quot;123456&quot;,&quot;OrderId&quot;:1198765450081,&quot;Amount&quot;:100,&quot;ProductId&quot;:287,&quot;LegalEntity&quot;:&quot;AxiCorp Limited&quot;,&quot;Currency&quot;:&quot;VND&quot;,&quot;ClientIp&quot;:&quot;123.123.123.123&quot;,&quot;ClientSessionId&quot;:&quot;QWE!@#wasdferty&quot;,&quot;SystemSourceId&quot;:6,&quot;InstrumentToken&quot;:&quot;&quot;,&quot;AdditionalInfo&quot;:{&quot;ClientFirstName&quot;:&quot;Someone&quot;,&quot;ClientLastName&quot;:&quot;Buying&quot;,&quot;ClientPhone&quot;:&quot;9876543223&quot;,&quot;ClientAddress&quot;:&quot;1,Bay Street&quot;,&quot;ClientEmail&quot;:&quot;someone@gmail.com&quot;,&quot;ClientCountry&quot;:&quot;US&quot;,&quot;ClientState&quot;:&quot;NY&quot;,&quot;ProductSelected&quot;:&quot;DebitCard&quot;}}']" doc:name="set request payload"/>
        <json:json-to-object-transformer returnClass="java.util.HashMap" doc:name="JSON to Object"/>
        <logger message="#['Request Payload\n CustomerId : '+payload.CustomerId+'\n OrderId : '+payload.OrderId+'\n Amount : '+payload.Amount+'\n Currency : '+payload.Currency+'\n ClientIp :'+payload.ClientIp+'\n ClientFirstName:'+payload.AdditionalInfo.ClientFirstName+'\n ClientLastName:'+payload.AdditionalInfo.ClientLastName+'\n ClientPhone:'+payload.AdditionalInfo.ClientPhone+'\n ClientEmail:'+payload.AdditionalInfo.ClientEmail+'\n ProductSelected : '+payload.AdditionalInfo.ProductSelected+'\n']" level="INFO" category="MUnit Test || DepositFlow-TestCase2(SuccessScenarioforProductSelectedinRequest)" doc:name="Request Payload"/>
        <json:object-to-json-transformer doc:name="Object to JSON"/>
        <flow-ref name="implementation-for-paymentasiasea-deposit_Flow" doc:name="Flow ref to Deposits Flow"/>
        <json:json-to-object-transformer returnClass="java.util.HashMap" doc:name="JSON to Object"/>
        <logger message="#['Response Payload \n OrderId : '+payload.OrderId+'\n ClientRedirectURL : '+payload.ClientRedirectURL+'\n ClientRedirectType : '+payload.ClientRedirectType+'\n PostParameters : '+payload.PostParameters+'\n']" level="INFO" category="MUnit Test || DepositFlow-TestCase2(SuccessScenarioforProductSelectedinRequest)" doc:name="Response Payload "/>
        <munit:assert-on-equals expectedValue="#['amount=100&amp;currency=VND&amp;customer_address=1,Bay Street&amp;customer_country=US&amp;customer_email=someone@gmail.com&amp;customer_first_name=Someone&amp;customer_ip=123.123.123.123&amp;customer_last_name=Buying&amp;customer_phone=9876543223&amp;customer_state=NY&amp;merchant_reference=1198765450081&amp;network=DebitCard&amp;return_url=https://demo.shop.com/payment/return&amp;sign=901d9ca7acbdea3fced44e417b40ec3b1eb6a367d8c10ce45b858f7b019a61da6da634b52c3c87682bf50773d3bc2d2136b53704d39e61bf1dc78157482a529e']" actualValue="#[payload.PostParameters]" doc:name="Assert PostParameters"/>
    </munit:test>
    <munit:test name="DepositFlow-TestCase3(SuccessScenarioforMissingNonMandatoryFieldinRequest)" description="Verifying Deposits flow with test request for success scenario" >
        <munit:set payload="#['{&quot;CustomerId&quot;:&quot;123456&quot;,&quot;OrderId&quot;:1198765450081,&quot;Amount&quot;:100,&quot;ProductId&quot;:287,&quot;LegalEntity&quot;:&quot;AxiCorp Limited&quot;,&quot;Currency&quot;:&quot;VND&quot;,&quot;ClientIp&quot;:&quot;123.123.123.123&quot;,&quot;ClientSessionId&quot;:&quot;QWE!@#wasdferty&quot;,&quot;SystemSourceId&quot;:6,&quot;InstrumentToken&quot;:&quot;&quot;,&quot;AdditionalInfo&quot;:{&quot;ClientFirstName&quot;:&quot;Someone&quot;,&quot;ClientLastName&quot;:&quot;Buying&quot;,&quot;ClientPhone&quot;:&quot;9876543223&quot;,&quot;ClientAddress&quot;:&quot;1,Bay Street&quot;,&quot;ClientEmail&quot;:&quot;someone@gmail.com&quot;}}']" doc:name="set request payload"/>
        <json:json-to-object-transformer returnClass="java.util.HashMap" doc:name="JSON to Object"/>
        <logger message="#['Request Payload\n CustomerId : '+payload.CustomerId+'\n OrderId : '+payload.OrderId+'\n Amount : '+payload.Amount+'\n Currency : '+payload.Currency+'\n ClientIp :'+payload.ClientIp+'\n ClientFirstName:'+payload.AdditionalInfo.ClientFirstName+'\n ClientLastName:'+payload.AdditionalInfo.ClientLastName+'\n ClientPhone:'+payload.AdditionalInfo.ClientPhone+'\n ClientEmail:'+payload.AdditionalInfo.ClientEmail+'\n']" level="INFO" category="MUnit Test || DepositFlow-TestCase3(SuccessScenarioforMissingNonMandatoryFieldinRequest)" doc:name="Request Payload"/>
        <json:object-to-json-transformer doc:name="Object to JSON"/>
        <flow-ref name="implementation-for-paymentasiasea-deposit_Flow" doc:name="Flow ref to Deposits Flow"/>
        <json:json-to-object-transformer returnClass="java.util.HashMap" doc:name="JSON to Object"/>
        <logger message="#['Response Payload \n OrderId : '+payload.OrderId+'\n ClientRedirectURL : '+payload.ClientRedirectURL+'\n ClientRedirectType : '+payload.ClientRedirectType+'\n PostParameters : '+payload.PostParameters+'\n']" level="INFO" category="MUnit Test || DepositFlow-TestCase3(SuccessScenarioforMissingNonMandatoryFieldinRequest)" doc:name="Response Payload "/>
        <munit:assert-on-equals expectedValue="#['amount=100&amp;currency=VND&amp;customer_address=1,Bay Street&amp;customer_country=&amp;customer_email=someone@gmail.com&amp;customer_first_name=Someone&amp;customer_ip=123.123.123.123&amp;customer_last_name=Buying&amp;customer_phone=9876543223&amp;customer_state=&amp;merchant_reference=1198765450081&amp;network=CreditCard&amp;return_url=https://demo.shop.com/payment/return&amp;sign=a60d6039a319fb3880f9ea628da7d0f26e3de25a800c76f0700a2302b41cae267f954c1237fc62cc9c9418bba45be9f2d65690b363bded0428bee3eeeeea78d6']" actualValue="#[payload.PostParameters]" doc:name="Assert PostParameters"/>
    </munit:test>



</mule>
